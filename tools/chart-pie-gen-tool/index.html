<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>å›¾è¡¨ç”Ÿæˆå™¨ - AIå·¥å…·é›†</title>
    <meta name="description" content="å›¾è¡¨ç”Ÿæˆå™¨">
    
    <!-- å¤–éƒ¨ä¾èµ– -->
    <script src="https://cdn.jsdelivr.net/npm/chart.js@3.9.1/dist/chart.min.js"
    <!-- æ ·å¼æ–‡ä»¶ -->
    <link rel="stylesheet" href="../../shared/css/common.css">
    
    <!-- å·¥å…·ç‰¹å®šæ ·å¼ -->
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
            background: linear-gradient(135deg, #f5f7fa 0%, #c3cfe2 100%);
            min-height: 100vh;
            color: #1d1d1f;
        }

        .container {
            max-width: 1200px;
            margin: 0 auto;
            padding: 40px 20px;
        }

        .header {
            text-align: center;
            margin-bottom: 60px;
        }

        .header h1 {
            font-size: 3.5rem;
            font-weight: 600;
            margin-bottom: 16px;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
        }

        .header p {
            font-size: 1.25rem;
            color: #86868b;
            font-weight: 400;
        }

        .main-content {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 40px;
            align-items: start;
        }

        .control-panel {
            background: rgba(255, 255, 255, 0.9);
            backdrop-filter: blur(20px);
            border-radius: 20px;
            padding: 30px;
            box-shadow: 0 8px 32px rgba(0, 0, 0, 0.1);
            border: 1px solid rgba(255, 255, 255, 0.2);
        }

        .chart-container {
            background: rgba(255, 255, 255, 0.95);
            backdrop-filter: blur(20px);
            border-radius: 20px;
            padding: 30px;
            box-shadow: 0 8px 32px rgba(0, 0, 0, 0.1);
            border: 1px solid rgba(255, 255, 255, 0.2);
            min-height: 500px;
            display: flex;
            align-items: center;
            justify-content: center;
        }

        .form-group {
            margin-bottom: 24px;
        }

        .form-group label {
            display: block;
            margin-bottom: 8px;
            font-weight: 500;
            color: #1d1d1f;
        }

        .chart-type-selector {
            display: grid;
            grid-template-columns: repeat(3, 1fr);
            gap: 12px;
            margin-bottom: 24px;
        }

        .chart-type-btn {
            padding: 12px 16px;
            border: 2px solid #e5e5e7;
            background: white;
            border-radius: 12px;
            cursor: pointer;
            transition: all 0.3s ease;
            text-align: center;
            font-weight: 500;
        }

        .chart-type-btn:hover {
            border-color: #007aff;
            transform: translateY(-2px);
        }

        .chart-type-btn.active {
            border-color: #007aff;
            background: #007aff;
            color: white;
        }

        .input-field {
            width: 100%;
            padding: 12px 16px;
            border: 2px solid #e5e5e7;
            border-radius: 12px;
            font-size: 16px;
            transition: border-color 0.3s ease;
            background: rgba(255, 255, 255, 0.8);
        }

        .input-field:focus {
            outline: none;
            border-color: #007aff;
        }

        .data-input-area {
            min-height: 120px;
            resize: vertical;
            font-family: 'SF Mono', Monaco, monospace;
        }

        .btn {
            width: 100%;
            padding: 14px 24px;
            background: linear-gradient(135deg, #007aff 0%, #5856d6 100%);
            color: white;
            border: none;
            border-radius: 12px;
            font-size: 16px;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s ease;
            margin-top: 16px;
        }

        .btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 8px 25px rgba(0, 122, 255, 0.3);
        }

        .btn:active {
            transform: translateY(0);
        }

        .download-btn {
            background: linear-gradient(135deg, #34c759 0%, #30d158 100%);
            margin-top: 12px;
        }

        .download-btn:hover {
            box-shadow: 0 8px 25px rgba(52, 199, 89, 0.3);
        }

        .example-data {
            font-size: 12px;
            color: #86868b;
            margin-top: 8px;
            padding: 12px;
            background: rgba(0, 0, 0, 0.05);
            border-radius: 8px;
        }

        .chart-canvas {
            max-width: 100%;
            max-height: 400px;
        }

        .empty-state {
            text-align: center;
            color: #86868b;
        }

        .empty-state h3 {
            margin-bottom: 8px;
            font-size: 1.5rem;
        }

        @media (max-width: 768px) {
            .main-content {
                grid-template-columns: 1fr;
                gap: 24px;
            }
            
            .header h1 {
                font-size: 2.5rem;
            }
            
            .container {
                padding: var(--spacing-lg) 16px;
            }
        }
    </style>
</head>
<body>
    <div class="tool-container">
        <!-- å·¥å…·å¤´éƒ¨ -->
        <header class="tool-header">
            <div class="tool-header-content">
                <a href="../../index.html" class="back-btn">
                    <svg width="16" height="16" viewBox="0 0 16 16" fill="none">
                        <path d="M10 4l-4 4 4 4" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                    </svg>
                    è¿”å›å·¥å…·é›†
                </a>
                
                <div class="tool-title">
                    <h1>å›¾è¡¨ç”Ÿæˆå™¨</h1>
                    <p class="tool-subtitle">å›¾è¡¨ç”Ÿæˆå™¨</p>
                </div>
                
                <button class="theme-toggle" id="themeToggle" aria-label="åˆ‡æ¢ä¸»é¢˜">
                    <svg width="20" height="20" viewBox="0 0 20 20" fill="none">
                        <circle cx="10" cy="10" r="4" stroke="currentColor" stroke-width="2"/>
                        <path d="M10 2v2M10 16v2M18 10h-2M4 10H2M15.66 4.34l-1.41 1.41M5.75 14.25l-1.41 1.41M15.66 15.66l-1.41-1.41M5.75 5.75L4.34 4.34" stroke="currentColor" stroke-width="2" stroke-linecap="round"/>
                    </svg>
                </button>
            </div>
        </header>

        <!-- å·¥å…·ä¸»å†…å®¹ -->
        <main class="tool-main">
            <div class="tool-card">
                <div class="tool-section">
                    <h2>
                        <svg width="20" height="20" viewBox="0 0 20 20" fill="none">
                            <rect x="3" y="3" width="14" height="14" rx="2" stroke="currentColor" stroke-width="2"/>
                        </svg>
                        å·¥å…·åŠŸèƒ½
                    </h2>
                    
                    
            <div class="tool-card">
                <div class="tool-section">
                    <h2>
                        <svg width="20" height="20" viewBox="0 0 20 20" fill="none">
                            <rect x="3" y="3" width="14" height="14" rx="2" stroke="currentColor" stroke-width="2"/>
                        </svg>
                        å›¾è¡¨ç”Ÿæˆå™¨
                    </h2>
                    <div class="container">
        <div class="header">
            <h1>å›¾è¡¨ç”Ÿæˆå™¨</h1>
            <p>è¾“å…¥æ•°æ®ï¼Œå¿«é€Ÿç”Ÿæˆç²¾ç¾å›¾è¡¨</p>
        </div>

        <div class="main-content">
            <div class="control-panel">
                <div class="form-group">
                    <label>é€‰æ‹©å›¾è¡¨ç±»å‹</label>
                    <div class="chart-type-selector">
                        <button class="chart-type-btn active" data-type="bar">æŸ±çŠ¶å›¾</button>
                        <button class="chart-type-btn" data-type="pie">é¥¼å›¾</button>
                        <button class="chart-type-btn" data-type="line">æŠ˜çº¿å›¾</button>
                    </div>
                </div>

                <div class="form-group">
                    <label for="chartTitle">å›¾è¡¨æ ‡é¢˜</label>
                    <input type="text" id="chartTitle" class="input-field" placeholder="è¯·è¾“å…¥å›¾è¡¨æ ‡é¢˜">
                </div>

                <div class="form-group">
                    <label for="dataInput">æ•°æ®è¾“å…¥</label>
                    <textarea id="dataInput" class="input-field data-input-area" placeholder="è¯·è¾“å…¥æ•°æ®ï¼Œæ ¼å¼ï¼šæ ‡ç­¾,æ•°å€¼"></textarea>
                    <div class="example-data">
                        ç¤ºä¾‹æ ¼å¼ï¼š<br>
                        è‹¹æœ,30<br>
                        é¦™è•‰,25<br>
                        æ©™å­,20<br>
                        è‘¡è„,15
                    </div>
                </div>

                <button class="btn" onclick="generateChart()">ç”Ÿæˆå›¾è¡¨</button>
                <button class="btn download-btn" onclick="downloadChart()" id="downloadBtn" style="display: none;">ä¸‹è½½å›¾è¡¨</button>
            </div>

            <div class="chart-container">
                <div class="empty-state" id="emptyState">
                    <h3>ğŸ“Š</h3>
                    <p>è¯·è¾“å…¥æ•°æ®å¹¶ç‚¹å‡»ç”Ÿæˆå›¾è¡¨</p>
                </div>
                <canvas id="chartCanvas" class="chart-canvas" style="display: none;"></canvas>
            </div>
        </div>
    </div>

    
                </div>
            </div>
                    <!-- ç»“æœæ˜¾ç¤ºåŒºåŸŸ -->
                    <div class="result-display" id="result">
                        <pre id="resultContent">å¤„ç†ç»“æœå°†åœ¨è¿™é‡Œæ˜¾ç¤º...</pre>
                    </div>
                </div>
            </div>
        </main>

        <!-- å·¥å…·é¡µè„š -->
        <footer class="tool-footer">
            <p>ç”± <a href="../../index.html">AIå·¥å…·é›†</a> æä¾› | åŸåˆ›å·¥å…·</p>
        </footer>
    </div>

    <!-- JavaScript -->
    <script src="../../shared/js/utils.js"></script>
    <script>
        // å·¥å…·ç‰¹å®šçš„JavaScriptä»£ç 
        class ToolApp {
            constructor() {
                this.init();
            }

            init() {
                this.setupEventListeners();
            }

            setupEventListeners() {
                document.getElementById('processBtn').addEventListener('click', () => this.process());
                document.getElementById('clearBtn').addEventListener('click', () => this.clear());
                document.getElementById('copyBtn').addEventListener('click', () => this.copyResult());
                
                // å®æ—¶å¤„ç†ï¼ˆå¯é€‰ï¼‰
                document.getElementById('input').addEventListener('input', 
                    ToolUtils.debounce(() => this.process(), 300)
                );
            }

            process() {
                const input = document.getElementById('input').value;
                const result = this.processInput(input);
                this.displayResult(result);
            }

            processInput(input) {
                
        let currentChart = null;
        let currentChartType = 'bar';

        // å›¾è¡¨ç±»å‹é€‰æ‹©
        document.querySelectorAll('.chart-type-btn').forEach(btn => {
            btn.addEventListener('click', function() {
                document.querySelectorAll('.chart-type-btn').forEach(b => b.classList.remove('active'));
                this.classList.add('active');
                currentChartType = this.dataset.type;
                updateExampleData();
            });
        });

        // æ›´æ–°ç¤ºä¾‹æ•°æ®
        function updateExampleData() {
            const exampleData = document.querySelector('.example-data');
            const examples = {
                bar: 'ç¤ºä¾‹æ ¼å¼ï¼š<br>ä¸€æœˆ,30<br>äºŒæœˆ,45<br>ä¸‰æœˆ,35<br>å››æœˆ,50',
                pie: 'ç¤ºä¾‹æ ¼å¼ï¼š<br>è‹¹æœ,30<br>é¦™è•‰,25<br>æ©™å­,20<br>è‘¡è„,15',
                line: 'ç¤ºä¾‹æ ¼å¼ï¼š<br>1æœˆ,10<br>2æœˆ,20<br>3æœˆ,15<br>4æœˆ,25<br>5æœˆ,30'
            };
            exampleData.innerHTML = examples[currentChartType];
        }

        // è§£ææ•°æ®
        function parseData(dataText) {
            const lines = dataText.trim().split('\n');
            const labels = [];
            const data = [];

            lines.forEach(line => {
                const parts = line.split(',');
                if (parts.length >= 2) {
                    labels.push(parts[0].trim());
                    data.push(parseFloat(parts[1].trim()) || 0);
                }
            });

            return { labels, data };
        }

        // ç”Ÿæˆå›¾è¡¨
        function generateChart() {
            const dataInput = document.getElementById('dataInput').value;
            const chartTitle = document.getElementById('chartTitle').value || 'å›¾è¡¨';

            if (!dataInput.trim()) {
                alert('è¯·è¾“å…¥æ•°æ®');
                return;
            }

            const { labels, data } = parseData(dataInput);

            if (labels.length === 0) {
                alert('æ•°æ®æ ¼å¼ä¸æ­£ç¡®ï¼Œè¯·æ£€æŸ¥è¾“å…¥');
                return;
            }

            // é”€æ¯ç°æœ‰å›¾è¡¨
            if (currentChart) {
                currentChart.destroy();
            }

            // éšè—ç©ºçŠ¶æ€ï¼Œæ˜¾ç¤ºç”»å¸ƒ
            document.getElementById('emptyState').style.display = 'none';
            document.getElementById('chartCanvas').style.display = 'block';
            document.getElementById('downloadBtn').style.display = 'block';

            const ctx = document.getElementById('chartCanvas').getContext('2d');

            // å›¾è¡¨é…ç½®
            const config = {
                type: currentChartType,
                data: {
                    labels: labels,
                    datasets: [{
                        label: chartTitle,
                        data: data,
                        backgroundColor: generateColors(data.length, 0.8),
                        borderColor: generateColors(data.length, 1),
                        borderWidth: 2,
                        fill: currentChartType === 'line' ? false : true
                    }]
                },
                options: {
                    responsive: true,
                    maintainAspectRatio: false,
                    plugins: {
                        title: {
                            display: true,
                            text: chartTitle,
                            font: {
                                size: 18,
                                weight: 'bold'
                            }
                        },
                        legend: {
                            display: currentChartType === 'pie',
                            position: 'bottom'
                        }
                    },
                    scales: currentChartType === 'pie' ? {} : {
                        y: {
                            beginAtZero: true,
                            grid: {
                                color: 'rgba(0, 0, 0, 0.1)'
                            }
                        },
                        x: {
                            grid: {
                                color: 'rgba(0, 0, 0, 0.1)'
                            }
                        }
                    }
                }
            };

            // æŠ˜çº¿å›¾ç‰¹æ®Šé…ç½®
            if (currentChartType === 'line') {
                config.data.datasets[0].tension = 0.4;
                config.data.datasets[0].pointBackgroundColor = '#007aff';
                config.data.datasets[0].pointBorderColor = '#007aff';
                config.data.datasets[0].pointRadius = 5;
            }

            currentChart = new Chart(ctx, config);
        }

        // ç”Ÿæˆé¢œè‰²
        function generateColors(count, alpha = 1) {
            const colors = [
                `rgba(0, 122, 255, ${alpha})`,
                `rgba(52, 199, 89, ${alpha})`,
                `rgba(255, 149, 0, ${alpha})`,
                `rgba(255, 59, 48, ${alpha})`,
                `rgba(88, 86, 214, ${alpha})`,
                `rgba(255, 204, 0, ${alpha})`,
                `rgba(175, 82, 222, ${alpha})`,
                `rgba(90, 200, 250, ${alpha})`
            ];

            const result = [];
            for (let i = 0; i < count; i++) {
                result.push(colors[i % colors.length]);
            }
            return result;
        }

        // ä¸‹è½½å›¾è¡¨
        function downloadChart() {
            if (!currentChart) {
                alert('è¯·å…ˆç”Ÿæˆå›¾è¡¨');
                return;
            }

            const canvas = document.getElementById('chartCanvas');
            const link = document.createElement('a');
            link.download = `chart_${Date.now()}.png`;
            link.href = canvas.toDataURL('image/png');
            link.click();
        }

        // åˆå§‹åŒ–ç¤ºä¾‹æ•°æ®
        updateExampleData();
    
                return input;
            }

            displayResult(result) {
                document.getElementById('resultContent').textContent = result;
            }

            clear() {
                document.getElementById('input').value = '';
                document.getElementById('resultContent').textContent = 'å¤„ç†ç»“æœå°†åœ¨è¿™é‡Œæ˜¾ç¤º...';
            }

            copyResult() {
                const result = document.getElementById('resultContent').textContent;
                if (result && result !== 'å¤„ç†ç»“æœå°†åœ¨è¿™é‡Œæ˜¾ç¤º...') {
                    ToolUtils.copyToClipboard(result);
                } else {
                    ToolUtils.showToast('æ²¡æœ‰å¯å¤åˆ¶çš„å†…å®¹', 'warning');
                }
            }
        }

        // åˆå§‹åŒ–åº”ç”¨
        document.addEventListener('DOMContentLoaded', () => {
            new ToolApp();
        });
    </script>
</body>
</html>
