<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>çœŸå¿ƒè¯å¤§å†’é™©ç”Ÿæˆå™¨ - AIå·¥å…·é›†</title>
    <meta name="description" content="çœŸå¿ƒè¯å¤§å†’é™©ç”Ÿæˆå™¨">
    
    <!-- æ ·å¼æ–‡ä»¶ -->
    <link rel="stylesheet" href="../../shared/css/common.css">
    
    <!-- å·¥å…·ç‰¹å®šæ ·å¼ -->
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
            display: flex;
            align-items: center;
            justify-content: center;
            padding: var(--spacing-lg);
        }

        .container {
            max-width: 600px;
            width: 100%;
            background: white;
            border-radius: 20px;
            box-shadow: 0 20px 40px rgba(0,0,0,0.1);
            overflow: hidden;
            animation: fadeIn 0.5s ease-out;
        }

        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(30px); }
            to { opacity: 1; transform: translateY(0); }
        }

        .header {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            padding: 30px;
            text-align: center;
        }

        .header h1 {
            font-size: 2.5em;
            margin-bottom: 10px;
            text-shadow: 0 2px 4px rgba(0,0,0,0.3);
        }

        .header p {
            font-size: 1.1em;
            opacity: 0.9;
        }

        .main-content {
            padding: 40px 30px;
        }

        .mode-selector {
            display: flex;
            gap: 15px;
            margin-bottom: 30px;
            background: #f8f9fa;
            padding: 8px;
            border-radius: 12px;
        }

        .mode-btn {
            flex: 1;
            padding: 15px 20px;
            border: none;
            border-radius: 8px;
            cursor: pointer;
            font-weight: 600;
            transition: all 0.3s;
            background: transparent;
            color: #6c757d;
        }

        .mode-btn.active {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            transform: translateY(-2px);
            box-shadow: 0 5px 15px rgba(102, 126, 234, 0.3);
        }

        .mode-btn:hover:not(.active) {
            background: rgba(102, 126, 234, 0.1);
            color: #667eea;
        }

        .question-display {
            background: #f8f9fa;
            border-radius: var(--radius-lg);
            padding: 30px;
            margin-bottom: 30px;
            min-height: 200px;
            display: flex;
            align-items: center;
            justify-content: center;
            text-align: center;
            border: 2px solid #e9ecef;
            position: relative;
            overflow: hidden;
        }

        .question-display::before {
            content: '';
            position: absolute;
            top: -50%;
            left: -50%;
            width: 200%;
            height: 200%;
            background: linear-gradient(45deg, transparent, rgba(102, 126, 234, 0.05), transparent);
            transform: rotate(45deg);
            transition: all 0.5s;
        }

        .question-display.truth::before {
            background: linear-gradient(45deg, transparent, rgba(76, 175, 80, 0.05), transparent);
        }

        .question-display.dare::before {
            background: linear-gradient(45deg, transparent, rgba(255, 152, 0, 0.05), transparent);
        }

        .question-text {
            font-size: 1.4em;
            line-height: 1.6;
            color: var(--text-primary);
            position: relative;
            z-index: 1;
            animation: slideIn 0.5s ease-out;
        }

        @keyframes slideIn {
            from { opacity: 0; transform: translateY(20px); }
            to { opacity: 1; transform: translateY(0); }
        }

        .placeholder-text {
            color: #adb5bd;
            font-style: italic;
        }

        .controls {
            display: flex;
            gap: 15px;
            margin-bottom: 30px;
        }

        .generate-btn {
            flex: 2;
            padding: 15px 25px;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            border: none;
            border-radius: 12px;
            font-size: 1.1em;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s;
            box-shadow: 0 4px 15px rgba(102, 126, 234, 0.3);
        }

        .generate-btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 8px 25px rgba(102, 126, 234, 0.4);
        }

        .generate-btn:active {
            transform: translateY(0);
        }

        .random-btn {
            flex: 1;
            padding: 15px;
            background: #6c757d;
            color: white;
            border: none;
            border-radius: 12px;
            font-size: 1.1em;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s;
        }

        .random-btn:hover {
            background: #5a6268;
            transform: translateY(-2px);
        }

        .settings {
            background: #f8f9fa;
            border-radius: var(--radius-lg);
            padding: 25px;
            margin-bottom: 30px;
            border: 2px solid #e9ecef;
        }

        .settings h3 {
            color: #495057;
            margin-bottom: 20px;
            font-size: 1.2em;
        }

        .setting-group {
            margin-bottom: 20px;
        }

        .setting-label {
            display: block;
            font-weight: 600;
            color: #495057;
            margin-bottom: 8px;
        }

        .difficulty-selector {
            display: flex;
            gap: 10px;
            flex-wrap: wrap;
        }

        .difficulty-btn {
            padding: 8px 16px;
            border: 2px solid #dee2e6;
            background: white;
            border-radius: 8px;
            cursor: pointer;
            transition: all 0.3s;
            font-size: 0.9em;
            font-weight: 600;
            color: #6c757d;
        }

        .difficulty-btn.active {
            border-color: #667eea;
            background: #667eea;
            color: white;
        }

        .difficulty-btn:hover:not(.active) {
            border-color: #adb5bd;
            background: #f8f9fa;
        }

        .category-filters {
            display: flex;
            gap: 10px;
            flex-wrap: wrap;
        }

        .category-tag {
            padding: 6px 12px;
            background: #e9ecef;
            border-radius: var(--radius-lg);
            font-size: 0.9em;
            cursor: pointer;
            transition: all 0.3s;
            border: 2px solid transparent;
        }

        .category-tag.active {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
        }

        .category-tag:hover:not(.active) {
            background: #dee2e6;
        }

        .stats {
            background: linear-gradient(135deg, #f8f9fa 0%, #e9ecef 100%);
            border-radius: var(--radius-lg);
            padding: var(--spacing-lg);
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(120px, 1fr));
            gap: 15px;
        }

        .stat-item {
            text-align: center;
            padding: 15px;
            background: white;
            border-radius: var(--radius-md);
            box-shadow: 0 2px 8px rgba(0,0,0,0.1);
        }

        .stat-number {
            font-size: 1.8em;
            font-weight: bold;
            color: #667eea;
            margin-bottom: 5px;
        }

        .stat-label {
            color: #6c757d;
            font-size: 0.9em;
        }

        .history {
            margin-top: 30px;
            background: #f8f9fa;
            border-radius: var(--radius-lg);
            padding: 25px;
            border: 2px solid #e9ecef;
        }

        .history h3 {
            color: #495057;
            margin-bottom: 15px;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        .clear-history {
            background: #dc3545;
            color: white;
            border: none;
            border-radius: 6px;
            padding: 5px 10px;
            font-size: 0.8em;
            cursor: pointer;
            transition: all 0.3s;
        }

        .clear-history:hover {
            background: #c82333;
        }

        .history-list {
            max-height: 200px;
            overflow-y: auto;
            border-radius: 8px;
        }

        .history-item {
            background: white;
            padding: 12px 15px;
            margin-bottom: 8px;
            border-radius: 8px;
            border-left: 4px solid #667eea;
            cursor: pointer;
            transition: all 0.3s;
            border-left-color: #4caf50;
        }

        .history-item.dare {
            border-left-color: #ff9800;
        }

        .history-item:hover {
            transform: translateX(5px);
            box-shadow: 0 2px 8px rgba(0,0,0,0.1);
        }

        .history-item-text {
            font-size: 0.95em;
            line-height: 1.4;
            color: #495057;
        }

        .history-item-meta {
            font-size: 0.8em;
            color: #6c757d;
            margin-top: 5px;
        }

        .footer {
            text-align: center;
            padding: var(--spacing-lg);
            background: #f8f9fa;
            color: #6c757d;
            font-size: 0.9em;
        }

        @media (max-width: 768px) {
            .container {
                margin: var(--spacing-md);
                border-radius: var(--radius-lg);
            }
            
            .header {
                padding: 25px 20px;
            }
            
            .header h1 {
                font-size: 2em;
            }
            
            .main-content {
                padding: 30px 20px;
            }
            
            .controls {
                flex-direction: column;
            }
            
            .mode-selector {
                flex-direction: column;
                gap: 10px;
            }
            
            .question-text {
                font-size: 1.2em;
            }
            
            .stats {
                grid-template-columns: repeat(2, 1fr);
            }
        }
    </style>
</head>
<body>
    <div class="tool-container">
        <!-- å·¥å…·å¤´éƒ¨ -->
        <header class="tool-header">
            <div class="tool-header-content">
                <a href="../../index.html" class="back-btn">
                    <svg width="16" height="16" viewBox="0 0 16 16" fill="none">
                        <path d="M10 4l-4 4 4 4" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                    </svg>
                    è¿”å›å·¥å…·é›†
                </a>
                
                <div class="tool-title">
                    <h1>çœŸå¿ƒè¯å¤§å†’é™©ç”Ÿæˆå™¨</h1>
                    <p class="tool-subtitle">çœŸå¿ƒè¯å¤§å†’é™©ç”Ÿæˆå™¨</p>
                </div>
                
                <button class="theme-toggle" id="themeToggle" aria-label="åˆ‡æ¢ä¸»é¢˜">
                    <svg width="20" height="20" viewBox="0 0 20 20" fill="none">
                        <circle cx="10" cy="10" r="4" stroke="currentColor" stroke-width="2"/>
                        <path d="M10 2v2M10 16v2M18 10h-2M4 10H2M15.66 4.34l-1.41 1.41M5.75 14.25l-1.41 1.41M15.66 15.66l-1.41-1.41M5.75 5.75L4.34 4.34" stroke="currentColor" stroke-width="2" stroke-linecap="round"/>
                    </svg>
                </button>
            </div>
        </header>

        <!-- å·¥å…·ä¸»å†…å®¹ -->
        <main class="tool-main">
            <div class="tool-card">
                <div class="tool-section">
                    <h2>
                        <svg width="20" height="20" viewBox="0 0 20 20" fill="none">
                            <rect x="3" y="3" width="14" height="14" rx="2" stroke="currentColor" stroke-width="2"/>
                        </svg>
                        å·¥å…·åŠŸèƒ½
                    </h2>
                    
                    
            <div class="tool-card">
                <div class="tool-section">
                    <h2>
                        <svg width="20" height="20" viewBox="0 0 20 20" fill="none">
                            <rect x="3" y="3" width="14" height="14" rx="2" stroke="currentColor" stroke-width="2"/>
                        </svg>
                        çœŸå¿ƒè¯å¤§å†’é™©ç”Ÿæˆå™¨
                    </h2>
                    <div class="container">
        <div class="header">
            <h1>ğŸ² çœŸå¿ƒè¯å¤§å†’é™©</h1>
            <p>éšæœºç”ŸæˆçœŸå¿ƒè¯é—®é¢˜æˆ–å¤§å†’é™©æŒ‘æˆ˜</p>
        </div>

        <div class="main-content">
            <!-- æ¨¡å¼é€‰æ‹© -->
            <div class="mode-selector">
                <button class="mode-btn active" id="truthBtn" onclick="setMode('truth')">ğŸ’š çœŸå¿ƒè¯</button>
                <button class="mode-btn" id="dareBtn" onclick="setMode('dare')">ğŸ§¡ å¤§å†’é™©</button>
            </div>

            <!-- é—®é¢˜æ˜¾ç¤ºåŒº -->
            <div class="question-display truth" id="questionDisplay">
                <div class="question-text placeholder-text" id="questionText">
                    ç‚¹å‡»ä¸‹æ–¹æŒ‰é’®å¼€å§‹æ¸¸æˆï¼
                </div>
            </div>

            <!-- æ§åˆ¶æŒ‰é’® -->
            <div class="controls">
                <button class="generate-btn" id="generateBtn" onclick="generateQuestion()">
                    ğŸ¯ ç”ŸæˆçœŸå¿ƒè¯
                </button>
                <button class="random-btn" onclick="randomMode()">
                    ğŸ² éšæœº
                </button>
            </div>

            <!-- è®¾ç½®é€‰é¡¹ -->
            <div class="settings">
                <h3>âš™ï¸ æ¸¸æˆè®¾ç½®</h3>
                
                <div class="setting-group">
                    <label class="setting-label">éš¾åº¦ç­‰çº§</label>
                    <div class="difficulty-selector">
                        <button class="difficulty-btn" onclick="setDifficulty('easy')">ğŸ˜Š ç®€å•</button>
                        <button class="difficulty-btn active" onclick="setDifficulty('normal')">ğŸ˜ ä¸­ç­‰</button>
                        <button class="difficulty-btn" onclick="setDifficulty('hard')">ğŸ˜ˆ å›°éš¾</button>
                        <button class="difficulty-btn" onclick="setDifficulty('extreme')">ğŸ”¥ æé™</button>
                    </div>
                </div>

                <div class="setting-group">
                    <label class="setting-label">ç±»åˆ«ç­›é€‰</label>
                    <div class="category-filters">
                        <span class="category-tag active" onclick="toggleCategory('general')">é€šç”¨</span>
                        <span class="category-tag active" onclick="toggleCategory('friendship')">å‹æƒ…</span>
                        <span class="category-tag active" onclick="toggleCategory('funny')">æç¬‘</span>
                        <span class="category-tag active" onclick="toggleCategory('personal')">ä¸ªäºº</span>
                        <span class="category-tag active" onclick="toggleCategory('creative')">åˆ›æ„</span>
                    </div>
                </div>
            </div>

            <!-- ç»Ÿè®¡ä¿¡æ¯ -->
            <div class="stats">
                <div class="stat-item">
                    <div class="stat-number" id="truthCount">0</div>
                    <div class="stat-label">çœŸå¿ƒè¯</div>
                </div>
                <div class="stat-item">
                    <div class="stat-number" id="dareCount">0</div>
                    <div class="stat-label">å¤§å†’é™©</div>
                </div>
                <div class="stat-item">
                    <div class="stat-number" id="totalCount">0</div>
                    <div class="stat-label">æ€»è®¡</div>
                </div>
                <div class="stat-item">
                    <div class="stat-number" id="currentStreak">0</div>
                    <div class="stat-label">è¿ç»­</div>
                </div>
            </div>

            <!-- å†å²è®°å½• -->
            <div class="history">
                <h3>
                    ğŸ“ å†å²è®°å½•
                    <button class="clear-history" onclick="clearHistory()">æ¸…ç©º</button>
                </h3>
                <div class="history-list" id="historyList">
                    <div style="text-align: center; color: #adb5bd; padding: 20px;">
                        æš‚æ— è®°å½•
                    </div>
                </div>
            </div>
        </div>

        <div class="footer">
            <p>ğŸ’¡ é€‚åˆæœ‹å‹èšä¼šã€æ´¾å¯¹ã€å›¢å»ºç­‰åœºåˆä½¿ç”¨</p>
            <p>è„šæ³¨ï¼šå°è‹è¶£ç ”AI - è®©èšä¼šå˜å¾—æ›´æœ‰è¶£</p>
        </div>
    </div>

    
                </div>
            </div>
                    <!-- ç»“æœæ˜¾ç¤ºåŒºåŸŸ -->
                    <div class="result-display" id="result">
                        <pre id="resultContent">å¤„ç†ç»“æœå°†åœ¨è¿™é‡Œæ˜¾ç¤º...</pre>
                    </div>
                </div>
            </div>
        </main>

        <!-- å·¥å…·é¡µè„š -->
        <footer class="tool-footer">
            <p>ç”± <a href="../../index.html">AIå·¥å…·é›†</a> æä¾› | åŸåˆ›å·¥å…·</p>
        </footer>
    </div>

    <!-- JavaScript -->
    <script src="../../shared/js/utils.js"></script>
    <script>
        // å·¥å…·ç‰¹å®šçš„JavaScriptä»£ç 
        class ToolApp {
            constructor() {
                this.init();
            }

            init() {
                this.setupEventListeners();
            }

            setupEventListeners() {
                document.getElementById('processBtn').addEventListener('click', () => this.process());
                document.getElementById('clearBtn').addEventListener('click', () => this.clear());
                document.getElementById('copyBtn').addEventListener('click', () => this.copyResult());
                
                // å®æ—¶å¤„ç†ï¼ˆå¯é€‰ï¼‰
                document.getElementById('input').addEventListener('input', 
                    ToolUtils.debounce(() => this.process(), 300)
                );
            }

            process() {
                const input = document.getElementById('input').value;
                const result = this.processInput(input);
                this.displayResult(result);
            }

            processInput(input) {
                
        // æ¸¸æˆçŠ¶æ€
        let currentMode = 'truth';
        let currentDifficulty = 'normal';
        let activeCategories = ['general', 'friendship', 'funny', 'personal', 'creative'];
        let gameStats = {
            truthCount: 0,
            dareCount: 0,
            totalCount: 0,
            currentStreak: 0,
            lastMode: null
        };
        let questionHistory = [];

        // é¢˜åº“
        const questionBank = {
            truth: {
                easy: {
                    general: [
                        "ä½ æœ€å–œæ¬¢çš„é¢œè‰²æ˜¯ä»€ä¹ˆï¼Ÿ",
                        "ä½ æœ€å–œæ¬¢çš„é£Ÿç‰©æ˜¯ä»€ä¹ˆï¼Ÿ",
                        "ä½ æœ€å–œæ¬¢çš„ç”µå½±ç±»å‹æ˜¯ä»€ä¹ˆï¼Ÿ",
                        "ä½ æœ€æƒ³å»å“ªä¸ªå›½å®¶æ—…è¡Œï¼Ÿ",
                        "ä½ æœ€æ€•ä»€ä¹ˆåŠ¨ç‰©ï¼Ÿ"
                    ],
                    friendship: [
                        "ä½ è§‰å¾—åœ¨åº§çš„è°æœ€æç¬‘ï¼Ÿ",
                        "ä½ æœ€æ¬£èµæœ‹å‹çš„å“ªä¸ªå“è´¨ï¼Ÿ",
                        "ä½ ç¬¬ä¸€æ¬¡è§åˆ°æœ€å¥½æœ‹å‹æ—¶çš„å°è±¡æ˜¯ä»€ä¹ˆï¼Ÿ",
                        "ä½ è§‰å¾—çœŸæ­£çš„å‹è°Šéœ€è¦ä»€ä¹ˆï¼Ÿ",
                        "ä½ å’Œæœ‹å‹ä¹‹é—´æœ€éš¾å¿˜çš„å›å¿†æ˜¯ä»€ä¹ˆï¼Ÿ"
                    ],
                    funny: [
                        "ä½ åšè¿‡æœ€å°´å°¬çš„äº‹æ˜¯ä»€ä¹ˆï¼Ÿ",
                        "ä½ å°æ—¶å€™æœ€å®³æ€•çš„ä¸œè¥¿æ˜¯ä»€ä¹ˆï¼Ÿ",
                        "ä½ æœ‰ä»€ä¹ˆå¥‡æ€ªçš„ä¹ æƒ¯å—ï¼Ÿ",
                        "ä½ æœ€å–œæ¬¢çš„æç¬‘è§†é¢‘æ˜¯ä»€ä¹ˆï¼Ÿ",
                        "ä½ è§‰å¾—è‡ªå·±æœ€æç¬‘çš„ç‰¹ç‚¹æ˜¯ä»€ä¹ˆï¼Ÿ"
                    ],
                    personal: [
                        "ä½ æœ€éª„å‚²çš„æˆå°±æ˜¯ä»€ä¹ˆï¼Ÿ",
                        "ä½ æœ€æƒ³æ”¹å˜è‡ªå·±çš„å“ªä¸ªä¹ æƒ¯ï¼Ÿ",
                        "ä½ è§‰å¾—è‡ªå·±æœ€å¤§çš„ä¼˜ç‚¹æ˜¯ä»€ä¹ˆï¼Ÿ",
                        "ä½ æœ€æƒ³å­¦ä¼šçš„æŠ€èƒ½æ˜¯ä»€ä¹ˆï¼Ÿ",
                        "ä½ ç«¥å¹´æ—¶æœ€å–œæ¬¢çš„ç©å…·æ˜¯ä»€ä¹ˆï¼Ÿ"
                    ],
                    creative: [
                        "å¦‚æœä½ èƒ½æ‹¥æœ‰ä»»ä½•è¶…èƒ½åŠ›ï¼Œä½ ä¼šé€‰æ‹©ä»€ä¹ˆï¼Ÿ",
                        "å¦‚æœä½ èƒ½å’Œå†å²ä¸Šä»»ä½•äººå…±è¿›æ™šé¤ï¼Œä½ ä¼šé€‰æ‹©è°ï¼Ÿ",
                        "å¦‚æœä½ ä¸­äº†å½©ç¥¨ï¼Œä½ ä¼šåšçš„ç¬¬ä¸€ä»¶äº‹æ˜¯ä»€ä¹ˆï¼Ÿ",
                        "å¦‚æœä½ èƒ½æ—¶å…‰å€’æµï¼Œä½ æœ€æƒ³å›åˆ°ä»€ä¹ˆæ—¶å€™ï¼Ÿ",
                        "å¦‚æœä½ èƒ½å˜æˆä»»ä½•åŠ¨ç‰©ï¼Œä½ ä¼šé€‰æ‹©ä»€ä¹ˆï¼Ÿ"
                    ]
                },
                normal: {
                    general: [
                        "ä½ æœ‰æ²¡æœ‰å·å·æš—æ‹è¿‡æŸä¸ªäººï¼Ÿ",
                        "ä½ æœ€åæ‚”åšçš„ä¸€ä»¶äº‹æ˜¯ä»€ä¹ˆï¼Ÿ",
                        "ä½ æœ€æƒ³å¯¹æŸä¸ªäººè¯´ä½†æ²¡è¯´å‡ºå£çš„è¯æ˜¯ä»€ä¹ˆï¼Ÿ",
                        "ä½ è§‰å¾—è‡ªå·±æœ€å¤§çš„ç¼ºç‚¹æ˜¯ä»€ä¹ˆï¼Ÿ",
                        "ä½ æœ‰ä»€ä¹ˆä¸æ•¢å‘Šè¯‰çˆ¶æ¯çš„ç§˜å¯†ï¼Ÿ"
                    ],
                    friendship: [
                        "ä½ æœ‰æ²¡æœ‰èƒŒåè¯´è¿‡æœ‹å‹çš„åè¯ï¼Ÿ",
                        "ä½ è§‰å¾—åœ¨åº§çš„è°æœ€å€¼å¾—ä¿¡ä»»ï¼Ÿ",
                        "ä½ æœ‰æ²¡æœ‰å«‰å¦’è¿‡å¥½æœ‹å‹ï¼Ÿ",
                        "ä½ æœ€ä¸æƒ³è®©æœ‹å‹çŸ¥é“çš„äº‹æ˜¯ä»€ä¹ˆï¼Ÿ",
                        "ä½ è§‰å¾—å‹è°Šä¸­æœ€é‡è¦çš„æ˜¯ä»€ä¹ˆï¼Ÿ"
                    ],
                    funny: [
                        "ä½ æœ‰æ²¡æœ‰åœ¨å…¬å…±åœºåˆåšè¿‡ç‰¹åˆ«å°´å°¬çš„äº‹ï¼Ÿ",
                        "ä½ æœ€ä¸¢è„¸çš„ç»å†æ˜¯ä»€ä¹ˆï¼Ÿ",
                        "ä½ æœ‰æ²¡æœ‰å› ä¸ºæç¬‘çš„åŸå› è¢«ç½šè¿‡ï¼Ÿ",
                        "ä½ åšè¿‡æœ€æ„šè ¢çš„äº‹æƒ…æ˜¯ä»€ä¹ˆï¼Ÿ",
                        "ä½ æœ‰ä»€ä¹ˆè®©äººæ„æƒ³ä¸åˆ°çš„çˆ±å¥½ï¼Ÿ"
                    ],
                    personal: [
                        "ä½ æœ€å®³æ€•é¢å¯¹çš„æ˜¯ä»€ä¹ˆï¼Ÿ",
                        "ä½ æœ‰æ²¡æœ‰æ’’è¿‡è®©è‡ªå·±åæ‚”çš„è°ï¼Ÿ",
                        "ä½ æœ€æƒ³æ”¹å˜è¿‡å»çš„å“ªä¸ªå†³å®šï¼Ÿ",
                        "ä½ è§‰å¾—è‡ªå·±æœ€ä¸å¯å‘Šäººçš„ç§˜å¯†æ˜¯ä»€ä¹ˆï¼Ÿ",
                        "ä½ æœ‰æ²¡æœ‰åšè¿‡è¿æ³•çš„äº‹æƒ…ï¼Ÿ"
                    ],
                    creative: [
                        "å¦‚æœæ˜å¤©æ˜¯ä¸–ç•Œæœ«æ—¥ï¼Œä½ ä¼šåšä»€ä¹ˆï¼Ÿ",
                        "å¦‚æœä½ èƒ½è¯»æ‡‚ä»»ä½•äººçš„å†…å¿ƒï¼Œä½ æœ€æƒ³çŸ¥é“è°åœ¨æƒ³ä»€ä¹ˆï¼Ÿ",
                        "å¦‚æœä½ å¿…é¡»åˆ é™¤ä¸€ä¸ªç¤¾äº¤åª’ä½“åº”ç”¨ï¼Œä½ ä¼šé€‰æ‹©å“ªä¸ªï¼Ÿ",
                        "å¦‚æœä½ èƒ½å¬åˆ°æ‰€æœ‰äººå¯¹ä½ çš„çœŸå®æƒ³æ³•ï¼Œä½ æ„¿æ„å—ï¼Ÿ",
                        "å¦‚æœä½ èƒ½è®©ä¸€ä¸ªå·²æ•…çš„äººå¤æ´»ï¼Œä½ ä¼šé€‰æ‹©è°ï¼Ÿ"
                    ]
                },
                hard: [
                    "ä½ æœ‰æ²¡æœ‰å‡ºè½¨è¿‡æˆ–è€…æƒ³è¿‡å‡ºè½¨ï¼Ÿ",
                    "ä½ åšè¿‡çš„æœ€ä¸é“å¾·çš„äº‹æ˜¯ä»€ä¹ˆï¼Ÿ",
                    "ä½ æœ€æ·±å±‚çš„ææƒ§æ˜¯ä»€ä¹ˆï¼Ÿ",
                    "ä½ æœ‰æ²¡æœ‰çœŸæ­£æ¨è¿‡æŸä¸ªäººï¼Ÿ",
                    "ä½ è§‰å¾—è‡ªå·±æœ€è™šä¼ªçš„åœ°æ–¹æ˜¯ä»€ä¹ˆï¼Ÿ",
                    "ä½ æœ‰æ²¡æœ‰ä¼¤å®³è¿‡æ— è¾œçš„äººï¼Ÿ",
                    "ä½ æœ€è§ä¸å¾—äººçš„ç§˜å¯†æ˜¯ä»€ä¹ˆï¼Ÿ",
                    "ä½ æœ‰æ²¡æœ‰èƒŒå›è¿‡ä¿¡ä»»ä½ çš„äººï¼Ÿ"
                ],
                extreme: [
                    "ä½ åšè¿‡çš„æœ€æç«¯çš„äº‹æƒ…æ˜¯ä»€ä¹ˆï¼Ÿ",
                    "ä½ æœ‰æ²¡æœ‰è€ƒè™‘è¿‡è‡ªå·±çš„æ­»äº¡æ–¹å¼ï¼Ÿ",
                    "ä½ æœ€é»‘æš—çš„æƒ³æ³•æ˜¯ä»€ä¹ˆï¼Ÿ",
                    "ä½ æœ‰æ²¡æœ‰æƒ³è¿‡è¦æŠ¥å¤æŸä¸ªäººï¼Ÿ",
                    "ä½ åšè¿‡çš„æœ€è®©è‡ªå·±ç¾è€»çš„äº‹æ˜¯ä»€ä¹ˆï¼Ÿ"
                ]
            },
            dare: {
                easy: {
                    general: [
                        "å”±ä¸€é¦–ä½ æœ€å–œæ¬¢çš„æ­Œ",
                        "æ¨¡ä»¿ä¸€ä¸ªåŠ¨ç‰©çš„å«å£°",
                        "åš10ä¸ªä¿¯å§æ’‘",
                        "è·³ä¸€æ®µèˆè¹ˆ",
                        "è¯´ä¸€ä¸ªç¬‘è¯è®©å¤§å®¶ç¬‘"
                    ],
                    friendship: [
                        "ç»™åœ¨åº§çš„æ¯ä¸ªäººä¸€ä¸ªæ‹¥æŠ±",
                        "å¤¸å¥–åœ¨åº§çš„æ¯ä¸ªäººä¸€å¥",
                        "å’Œå·¦è¾¹çš„äººæ¡æ‰‹30ç§’",
                        "ç»™æœ€å¥½çš„æœ‹å‹å‘ä¸€æ¡æ„Ÿè°¢ä¿¡æ¯",
                        "æ¨¡ä»¿åœ¨åº§æŸä¸ªäººçš„è¯´è¯æ–¹å¼"
                    ],
                    funny: [
                        "ç”¨å±è‚¡å†™å‡ºè‡ªå·±çš„åå­—",
                        "å­¦é¸¡å«30ç§’",
                        "åšä¸€ä¸ªæç¬‘çš„è¡¨æƒ…å¹¶ä¿æŒ1åˆ†é’Ÿ",
                        "ç”¨æœ€å°´å°¬çš„æ–¹å¼ä»‹ç»è‡ªå·±",
                        "è¡¨æ¼”ä¸€ä¸ªæ— å£°å“‘å‰§"
                    ],
                    personal: [
                        "åˆ†äº«ä¸€ä¸ªç«¥å¹´è¶£äº‹",
                        "å±•ç¤ºä½ çš„ç‰¹æ®ŠæŠ€èƒ½",
                        "è¯´å‡ºä½ çš„ä¸‰ä¸ªä¼˜ç‚¹",
                        "åˆ†äº«ä½ æœ€è‡ªè±ªçš„æ—¶åˆ»",
                        "åšä½ æœ€æ‹¿æ‰‹çš„è¡¨æƒ…"
                    ],
                    creative: [
                        "ç”¨èº«ä½“æ‹¼å‡ºä¸€ä¸ªå­—æ¯",
                        "åˆ›ç¼–ä¸€ä¸ª30ç§’çš„æ•…äº‹",
                        "å‘æ˜ä¸€ä¸ªæ–°çš„æ¡æ‰‹æ–¹å¼",
                        "ç”¨ä¸‰ä¸ªè¯æè¿°åœ¨åº§çš„æ¯ä¸ªäºº",
                        "å³å…´è¡¨æ¼”ä¸€ä¸ªæƒ…æ™¯å‰§"
                    ]
                },
                normal: {
                    general: [
                        "æ‰“ç”µè¯ç»™å®¶äººè¯´ä½ çˆ±ä»–ä»¬",
                        "åœ¨ç¤¾äº¤åª’ä½“ä¸Šå‘ä¸€æ¡æç¬‘çŠ¶æ€",
                        "è®©åˆ«äººåœ¨ä½ è„¸ä¸Šç”»ç”»",
                        "å€’ç«‹30ç§’",
                        "é—­çœ¼èµ°20æ­¥"
                    ],
                    friendship: [
                        "ç»™æœ‹å‹å‘ä¸€æ¡å‘Šç™½ä¿¡æ¯ï¼ˆå‹æƒ…ï¼‰",
                        "è®©æœ‹å‹é€‰æ‹©ä½ çš„å‘å‹",
                        "å…¬å¼€è¡¨æ‰¬ä¸€ä¸ªæœ‹å‹",
                        "å’Œæœ‹å‹äº¤æ¢è¡£æœ",
                        "è®©æœ‹å‹å†³å®šä½ ä¸‹ä¸€ä¸ªç¤¾äº¤åª’ä½“å¤´åƒ"
                    ],
                    funny: [
                        "ç”¨è¢œå­å½“æ‰‹å¥—åƒä¸œè¥¿",
                        "æ¨¡ä»¿å©´å„¿å“­æ³£1åˆ†é’Ÿ",
                        "ç”¨å¤¸å¼ çš„æ–¹å¼é‡ç°ä½ çš„å‡ºç”Ÿè¿‡ç¨‹",
                        "å­¦çŒ«å’ªèˆ”çˆªå­æ¸…æ´è‡ªå·±",
                        "å‡è£…ä½ æ˜¯ä¸€ä¸ªæœºå™¨äºº"
                    ],
                    personal: [
                        "åˆ†äº«ä½ æœ€å°´å°¬çš„ç»å†",
                        "å…¬å¼€é“æ­‰ä¸€ä»¶ä½ åšé”™çš„äº‹",
                        "æ‰¿è®¤ä¸€ä¸ªä½ çš„åä¹ æƒ¯",
                        "è¯´å‡ºä½ æœ€å®³æ€•çš„ä¸‰ä»¶äº‹",
                        "å±•ç¤ºä½ æœ€éš¾çœ‹çš„ç…§ç‰‡"
                    ],
                    creative: [
                        "ç”¨ä½ çš„èº«ä½“æ‹¼å‡ºåœ¨åº§äººæ•°çš„æ•°å­—",
                        "åˆ›ä½œä¸€é¦–å…³äºå‹è°Šçš„è¯—",
                        "è®¾è®¡ä¸€ä¸ªæ–°çš„é—®å€™è¯­",
                        "ç”¨ä¸åŒçš„å£°éŸ³è®²åŒä¸€ä¸ªæ•…äº‹",
                        "å‘æ˜ä¸€ç§æ–°çš„èˆè¹ˆåŠ¨ä½œ"
                    ]
                },
                hard: [
                    "ç»™ä½ æš—æ‹çš„äººå‘ä¿¡æ¯è¡¨ç™½",
                    "åˆ é™¤ä½ æœ€å–œæ¬¢çš„ç¤¾äº¤åª’ä½“åº”ç”¨24å°æ—¶",
                    "è®©å¤§å®¶çœ‹ä½ æœ€ç§å¯†çš„èŠå¤©è®°å½•",
                    "å…¬å¼€ä¸€ä¸ªä½ çš„é»‘å†å²",
                    "åšä¸€ä»¶è®©ä½ æ„Ÿåˆ°ç¾è€»çš„äº‹",
                    "æ‰¿è®¤ä½ å¯¹åœ¨åº§æŸäººçš„çœŸå®çœ‹æ³•",
                    "è®©åˆ«äººç¿»çœ‹ä½ çš„æ‰‹æœºç›¸å†Œ",
                    "å…¬å¼€ä½ æœ€ä¸æƒ³è®©äººçŸ¥é“çš„ç§˜å¯†"
                ],
                extreme: [
                    "åœ¨å…¬å…±åœºæ‰€å¤§å–Šä¸€åˆ†é’Ÿ",
                    "ç»™éšæœºé™Œç”Ÿäººå‘æç¬‘ä¿¡æ¯",
                    "åœ¨è§†é¢‘é€šè¯ä¸­åšæœ€å°´å°¬çš„åŠ¨ä½œ",
                    "æ‰¿è¯ºåšä¸€ä»¶æ”¹å˜ç”Ÿæ´»çš„äº‹",
                    "å½“ä¼—æ‰¿è®¤ä½ æœ€ç¾è€»çš„è¡Œä¸º"
                ]
            }
        };

        // åˆå§‹åŒ–
        function init() {
            loadGameData();
            updateStats();
            updateHistoryDisplay();
        }

        // è®¾ç½®æ¨¡å¼
        function setMode(mode) {
            currentMode = mode;
            
            // æ›´æ–°æŒ‰é’®çŠ¶æ€
            document.querySelectorAll('.mode-btn').forEach(btn => btn.classList.remove('active'));
            document.getElementById(mode + 'Btn').classList.add('active');
            
            // æ›´æ–°æ˜¾ç¤ºåŒºæ ·å¼
            const display = document.getElementById('questionDisplay');
            display.className = `question-display ${mode}`;
            
            // æ›´æ–°ç”ŸæˆæŒ‰é’®æ–‡æœ¬
            const generateBtn = document.getElementById('generateBtn');
            generateBtn.textContent = mode === 'truth' ? 'ğŸ¯ ç”ŸæˆçœŸå¿ƒè¯' : 'ğŸ¯ ç”Ÿæˆå¤§å†’é™©';
        }

        // è®¾ç½®éš¾åº¦
        function setDifficulty(difficulty) {
            currentDifficulty = difficulty;
            
            // æ›´æ–°æŒ‰é’®çŠ¶æ€
            document.querySelectorAll('.difficulty-btn').forEach(btn => btn.classList.remove('active'));
            event.target.classList.add('active');
        }

        // åˆ‡æ¢ç±»åˆ«
        function toggleCategory(category) {
            const index = activeCategories.indexOf(category);
            if (index > -1) {
                if (activeCategories.length > 1) { // è‡³å°‘ä¿ç•™ä¸€ä¸ªç±»åˆ«
                    activeCategories.splice(index, 1);
                    event.target.classList.remove('active');
                }
            } else {
                activeCategories.push(category);
                event.target.classList.add('active');
            }
        }

        // ç”Ÿæˆé—®é¢˜
        function generateQuestion() {
            const question = getRandomQuestion(currentMode, currentDifficulty);
            displayQuestion(question);
            updateGameStats(currentMode);
            addToHistory(question, currentMode);
            saveGameData();
        }

        // éšæœºæ¨¡å¼
        function randomMode() {
            const mode = Math.random() < 0.5 ? 'truth' : 'dare';
            const difficulties = ['easy', 'normal', 'hard', 'extreme'];
            const difficulty = difficulties[Math.floor(Math.random() * difficulties.length)];
            
            currentMode = mode;
            currentDifficulty = difficulty;
            
            // æ›´æ–°UIçŠ¶æ€
            setMode(mode);
            document.querySelectorAll('.difficulty-btn').forEach(btn => btn.classList.remove('active'));
            document.querySelector(`[onclick="setDifficulty('${difficulty}')"]`).classList.add('active');
            
            generateQuestion();
        }

        // è·å–éšæœºé—®é¢˜
        function getRandomQuestion(mode, difficulty) {
            const bank = questionBank[mode][difficulty];
            
            if (typeof bank === 'object' && !Array.isArray(bank)) {
                // ä»æ¿€æ´»çš„ç±»åˆ«ä¸­éšæœºé€‰æ‹©
                const availableCategories = activeCategories.filter(cat => bank[cat]);
                if (availableCategories.length === 0) return "æ²¡æœ‰æ‰¾åˆ°åˆé€‚çš„é—®é¢˜";
                
                const randomCategory = availableCategories[Math.floor(Math.random() * availableCategories.length)];
                const questions = bank[randomCategory];
                return questions[Math.floor(Math.random() * questions.length)];
            } else if (Array.isArray(bank)) {
                // ç›´æ¥ä»æ•°ç»„ä¸­é€‰æ‹©
                return bank[Math.floor(Math.random() * bank.length)];
            }
            
            return "æ²¡æœ‰æ‰¾åˆ°åˆé€‚çš„é—®é¢˜";
        }

        // æ˜¾ç¤ºé—®é¢˜
        function displayQuestion(question) {
            const questionText = document.getElementById('questionText');
            questionText.textContent = question;
            questionText.classList.remove('placeholder-text');
            
            // æ·»åŠ åŠ¨ç”»æ•ˆæœ
            questionText.style.animation = 'none';
            setTimeout(() => {
                questionText.style.animation = 'slideIn 0.5s ease-out';
            }, 10);
        }

        // æ›´æ–°æ¸¸æˆç»Ÿè®¡
        function updateGameStats(mode) {
            if (mode === 'truth') {
                gameStats.truthCount++;
            } else {
                gameStats.dareCount++;
            }
            gameStats.totalCount++;
            
            // æ›´æ–°è¿ç»­è®°å½•
            if (gameStats.lastMode === mode) {
                gameStats.currentStreak++;
            } else {
                gameStats.currentStreak = 1;
                gameStats.lastMode = mode;
            }
            
            updateStats();
        }

        // æ›´æ–°ç»Ÿè®¡æ˜¾ç¤º
        function updateStats() {
            document.getElementById('truthCount').textContent = gameStats.truthCount;
            document.getElementById('dareCount').textContent = gameStats.dareCount;
            document.getElementById('totalCount').textContent = gameStats.totalCount;
            document.getElementById('currentStreak').textContent = gameStats.currentStreak;
        }

        // æ·»åŠ åˆ°å†å²è®°å½•
        function addToHistory(question, mode) {
            const historyItem = {
                question: question,
                mode: mode,
                difficulty: currentDifficulty,
                timestamp: new Date().toLocaleString()
            };
            
            questionHistory.unshift(historyItem);
            
            // é™åˆ¶å†å²è®°å½•æ•°é‡
            if (questionHistory.length > 20) {
                questionHistory = questionHistory.slice(0, 20);
            }
            
            updateHistoryDisplay();
        }

        // æ›´æ–°å†å²è®°å½•æ˜¾ç¤º
        function updateHistoryDisplay() {
            const historyList = document.getElementById('historyList');
            
            if (questionHistory.length === 0) {
                historyList.innerHTML = '<div style="text-align: center; color: #adb5bd; padding: 20px;">æš‚æ— è®°å½•</div>';
                return;
            }
            
            const historyHTML = questionHistory.map((item, index) => `
                <div class="history-item ${item.mode}" onclick="repeatQuestion(${index})">
                    <div class="history-item-text">${item.question}</div>
                    <div class="history-item-meta">
                        ${item.mode === 'truth' ? 'ğŸ’š çœŸå¿ƒè¯' : 'ğŸ§¡ å¤§å†’é™©'} Â· 
                        ${getDifficultyText(item.difficulty)} Â· 
                        ${item.timestamp}
                    </div>
                </div>
            `).join('');
            
            historyList.innerHTML = historyHTML;
        }

        // é‡å¤é—®é¢˜
        function repeatQuestion(index) {
            const item = questionHistory[index];
            displayQuestion(item.question);
        }

        // è·å–éš¾åº¦æ–‡æœ¬
        function getDifficultyText(difficulty) {
            const difficultyMap = {
                'easy': 'ğŸ˜Š ç®€å•',
                'normal': 'ğŸ˜ ä¸­ç­‰',
                'hard': 'ğŸ˜ˆ å›°éš¾',
                'extreme': 'ğŸ”¥ æé™'
            };
            return difficultyMap[difficulty] || difficulty;
        }

        // æ¸…ç©ºå†å²è®°å½•
        function clearHistory() {
            if (confirm('ç¡®å®šè¦æ¸…ç©ºæ‰€æœ‰å†å²è®°å½•å—ï¼Ÿ')) {
                questionHistory = [];
                updateHistoryDisplay();
                saveGameData();
            }
        }

        // ä¿å­˜æ¸¸æˆæ•°æ®
        function saveGameData() {
            const gameData = {
                stats: gameStats,
                history: questionHistory,
                settings: {
                    mode: currentMode,
                    difficulty: currentDifficulty,
                    categories: activeCategories
                }
            };
            
            try {
                localStorage.setItem('truth_or_dare_data', JSON.stringify(gameData));
            } catch (error) {
                console.error('ä¿å­˜æ•°æ®å¤±è´¥:', error);
            }
        }

        // åŠ è½½æ¸¸æˆæ•°æ®
        function loadGameData() {
            try {
                const savedData = localStorage.getItem('truth_or_dare_data');
                if (savedData) {
                    const gameData = JSON.parse(savedData);
                    
                    if (gameData.stats) {
                        gameStats = { ...gameStats, ...gameData.stats };
                    }
                    
                    if (gameData.history) {
                        questionHistory = gameData.history;
                    }
                    
                    if (gameData.settings) {
                        if (gameData.settings.mode) {
                            setMode(gameData.settings.mode);
                        }
                        if (gameData.settings.difficulty) {
                            currentDifficulty = gameData.settings.difficulty;
                            document.querySelectorAll('.difficulty-btn').forEach(btn => btn.classList.remove('active'));
                            document.querySelector(`[onclick="setDifficulty('${gameData.settings.difficulty}')"]`)?.classList.add('active');
                        }
                        if (gameData.settings.categories) {
                            activeCategories = gameData.settings.categories;
                            document.querySelectorAll('.category-tag').forEach(tag => {
                                const category = tag.textContent.toLowerCase().replace(/[^a-z]/g, '');
                                if (activeCategories.includes(category)) {
                                    tag.classList.add('active');
                                } else {
                                    tag.classList.remove('active');
                                }
                            });
                        }
                    }
                }
            } catch (error) {
                console.error('åŠ è½½æ•°æ®å¤±è´¥:', error);
            }
        }

        // åˆå§‹åŒ–åº”ç”¨
        window.addEventListener('load', init);
        
        // é¡µé¢å¸è½½å‰ä¿å­˜æ•°æ®
        window.addEventListener('beforeunload', saveGameData);
    
                return input;
            }

            displayResult(result) {
                document.getElementById('resultContent').textContent = result;
            }

            clear() {
                document.getElementById('input').value = '';
                document.getElementById('resultContent').textContent = 'å¤„ç†ç»“æœå°†åœ¨è¿™é‡Œæ˜¾ç¤º...';
            }

            copyResult() {
                const result = document.getElementById('resultContent').textContent;
                if (result && result !== 'å¤„ç†ç»“æœå°†åœ¨è¿™é‡Œæ˜¾ç¤º...') {
                    ToolUtils.copyToClipboard(result);
                } else {
                    ToolUtils.showToast('æ²¡æœ‰å¯å¤åˆ¶çš„å†…å®¹', 'warning');
                }
            }
        }

        // åˆå§‹åŒ–åº”ç”¨
        document.addEventListener('DOMContentLoaded', () => {
            new ToolApp();
        });
    </script>
</body>
</html>
