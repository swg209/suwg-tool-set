<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>小强升职记 - GTD时间管理系统 - AI工具集</title>
    <meta name="description" content="小强升职记 - GTD时间管理系统">
    
    <!-- 样式文件 -->
    <link rel="stylesheet" href="../../shared/css/common.css">
    
    <!-- 工具特定样式 -->
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Microsoft YaHei', sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
            color: var(--text-primary);
        }

        .container {
            max-width: 1400px;
            margin: 0 auto;
            padding: var(--spacing-lg);
        }

        .header {
            text-align: center;
            color: white;
            margin-bottom: 30px;
        }

        .header h1 {
            font-size: 2.5em;
            margin-bottom: 10px;
            text-shadow: 2px 2px 4px rgba(0,0,0,0.3);
        }

        .nav-tabs {
            display: flex;
            background: rgba(255,255,255,0.1);
            border-radius: var(--radius-lg);
            padding: 5px;
            margin-bottom: 20px;
            backdrop-filter: blur(10px);
        }

        .nav-tab {
            flex: 1;
            padding: 15px;
            background: none;
            border: none;
            color: white;
            cursor: pointer;
            border-radius: var(--radius-md);
            transition: all 0.3s;
            font-size: 16px;
        }

        .nav-tab.active {
            background: white;
            color: var(--text-primary);
            font-weight: bold;
        }

        .tab-content {
            display: none;
            background: white;
            border-radius: 20px;
            padding: 30px;
            box-shadow: 0 20px 40px rgba(0,0,0,0.1);
        }

        .tab-content.active {
            display: block;
        }

        .section-title {
            font-size: 1.5em;
            margin-bottom: 20px;
            color: var(--text-primary);
            display: flex;
            align-items: center;
            gap: 10px;
        }

        /* 收集箱样式 */
        .inbox-section {
            background: #f8f9fa;
            padding: var(--spacing-lg);
            border-radius: var(--radius-lg);
            margin-bottom: 20px;
        }

        .quick-input {
            display: flex;
            gap: 10px;
            margin-bottom: 20px;
        }

        .quick-input input {
            flex: 1;
            padding: 12px 15px;
            border: 2px solid #ddd;
            border-radius: 8px;
            font-size: 16px;
        }

        .add-btn {
            padding: 12px 20px;
            background: #4ecdc4;
            color: white;
            border: none;
            border-radius: 8px;
            cursor: pointer;
            font-weight: bold;
        }

        /* 四象限矩阵 */
        .matrix-grid {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 20px;
            margin-bottom: 30px;
        }

        .quadrant {
            background: #f8f9fa;
            border-radius: var(--radius-lg);
            padding: var(--spacing-lg);
            min-height: 300px;
            border: 3px solid transparent;
            transition: all 0.3s;
        }

        .quadrant.urgent-important {
            border-color: #ff6b6b;
            background: linear-gradient(135deg, #ff6b6b10, #ff6b6b05);
        }

        .quadrant.important-not-urgent {
            border-color: #4ecdc4;
            background: linear-gradient(135deg, #4ecdc410, #4ecdc405);
        }

        .quadrant.urgent-not-important {
            border-color: #ffa726;
            background: linear-gradient(135deg, #ffa72610, #ffa72605);
        }

        .quadrant.not-urgent-not-important {
            border-color: #9e9e9e;
            background: linear-gradient(135deg, #9e9e9e10, #9e9e9e05);
        }

        .quadrant-title {
            font-weight: bold;
            margin-bottom: 15px;
            padding-bottom: 10px;
            border-bottom: 2px solid #eee;
        }

        .task-item {
            background: white;
            padding: 12px;
            margin-bottom: 10px;
            border-radius: 8px;
            border-left: 4px solid #ddd;
            cursor: pointer;
            transition: all 0.3s;
        }

        .task-item:hover {
            transform: translateX(5px);
            box-shadow: 0 5px 15px rgba(0,0,0,0.1);
        }

        /* 项目管理 */
        .project-card {
            background: #f8f9fa;
            border-radius: var(--radius-lg);
            padding: var(--spacing-lg);
            margin-bottom: 20px;
            border-left: 5px solid #4ecdc4;
        }

        .project-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 15px;
        }

        .project-title {
            font-size: 1.2em;
            font-weight: bold;
            color: var(--text-primary);
        }

        .project-progress {
            width: 100px;
            height: 8px;
            background: #e9ecef;
            border-radius: 4px;
            overflow: hidden;
        }

        .progress-fill {
            height: 100%;
            background: linear-gradient(45deg, #4ecdc4, #44a08d);
            transition: width 0.3s;
        }

        /* 下一步行动 */
        .context-section {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: 20px;
        }

        .context-card {
            background: #f8f9fa;
            border-radius: var(--radius-lg);
            padding: var(--spacing-lg);
        }

        .context-title {
            font-weight: bold;
            margin-bottom: 15px;
            color: #4ecdc4;
        }

        /* 回顾系统 */
        .review-stats {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 20px;
            margin-bottom: 30px;
        }

        .stat-card {
            background: linear-gradient(135deg, #667eea, #764ba2);
            color: white;
            padding: var(--spacing-lg);
            border-radius: var(--radius-lg);
            text-align: center;
        }

        .stat-number {
            font-size: 2em;
            font-weight: bold;
            margin-bottom: 5px;
        }

        .stat-label {
            opacity: 0.9;
        }

        .footer {
            text-align: center;
            color: white;
            margin-top: 30px;
            opacity: 0.8;
        }

        .btn {
            padding: 8px 15px;
            border: none;
            border-radius: var(--radius-sm);
            cursor: pointer;
            font-size: 14px;
            transition: all 0.3s;
        }

        .btn-primary { background: #4ecdc4; color: white; }
        .btn-danger { background: #ff6b6b; color: white; }
        .btn-warning { background: #ffa726; color: white; }

        .modal {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0,0,0,0.5);
            z-index: 1000;
        }

        .modal-content {
            position: absolute;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            background: white;
            padding: 30px;
            border-radius: var(--radius-lg);
            width: 90%;
            max-width: 500px;
        }
        
        @media (max-width: 768px) {
            .container {
                padding: var(--spacing-md);
                margin: var(--spacing-sm);
            }
        }
    </style>
</head>
<body>
    <div class="tool-container">
        <!-- 工具头部 -->
        <header class="tool-header">
            <div class="tool-header-content">
                <a href="../../index.html" class="back-btn">
                    <svg width="16" height="16" viewBox="0 0 16 16" fill="none">
                        <path d="M10 4l-4 4 4 4" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                    </svg>
                    返回工具集
                </a>
                
                <div class="tool-title">
                    <h1>小强升职记 - GTD时间管理系统</h1>
                    <p class="tool-subtitle">小强升职记 - GTD时间管理系统</p>
                </div>
                
                <button class="theme-toggle" id="themeToggle" aria-label="切换主题">
                    <svg width="20" height="20" viewBox="0 0 20 20" fill="none">
                        <circle cx="10" cy="10" r="4" stroke="currentColor" stroke-width="2"/>
                        <path d="M10 2v2M10 16v2M18 10h-2M4 10H2M15.66 4.34l-1.41 1.41M5.75 14.25l-1.41 1.41M15.66 15.66l-1.41-1.41M5.75 5.75L4.34 4.34" stroke="currentColor" stroke-width="2" stroke-linecap="round"/>
                    </svg>
                </button>
            </div>
        </header>

        <!-- 工具主内容 -->
        <main class="tool-main">
            <div class="tool-card">
                <div class="tool-section">
                    <h2>
                        <svg width="20" height="20" viewBox="0 0 20 20" fill="none">
                            <rect x="3" y="3" width="14" height="14" rx="2" stroke="currentColor" stroke-width="2"/>
                        </svg>
                        工具功能
                    </h2>
                    
                    
            <div class="tool-card">
                <div class="tool-section">
                    <h2>
                        <svg width="20" height="20" viewBox="0 0 20 20" fill="none">
                            <rect x="3" y="3" width="14" height="14" rx="2" stroke="currentColor" stroke-width="2"/>
                        </svg>
                        小强升职记 - GTD时间管理系统
                    </h2>
                    <div class="container">
        <div class="header">
            <h1>📚 小强升职记 - GTD时间管理系统</h1>
            <p>收集 → 处理 → 组织 → 回顾 → 执行</p>
        </div>

        <div class="nav-tabs">
            <button class="nav-tab active" onclick="showTab('inbox')">📥 收集箱</button>
            <button class="nav-tab" onclick="showTab('matrix')">📊 四象限</button>
            <button class="nav-tab" onclick="showTab('projects')">📋 项目管理</button>
            <button class="nav-tab" onclick="showTab('actions')">⚡ 下一步行动</button>
            <button class="nav-tab" onclick="showTab('review')">🔄 回顾系统</button>
        </div>

        <!-- 收集箱 -->
        <div id="inbox" class="tab-content active">
            <div class="section-title">📥 收集箱 - 快速记录所有想法</div>
            
            <div class="inbox-section">
                <div class="quick-input">
                    <input type="text" id="inboxInput" placeholder="快速记录任何想法、任务或灵感..." onkeypress="handleInboxEnter(event)">
                    <button class="add-btn" onclick="addToInbox()">添加</button>
                </div>
                
                <div id="inboxList"></div>
            </div>
        </div>

        <!-- 四象限矩阵 -->
        <div id="matrix" class="tab-content">
            <div class="section-title">📊 艾森豪威尔矩阵 - 重要性与紧急性分析</div>
            
            <div class="matrix-grid">
                <div class="quadrant urgent-important">
                    <div class="quadrant-title">🔥 重要且紧急 (立即执行)</div>
                    <div id="q1-tasks"></div>
                </div>
                <div class="quadrant important-not-urgent">
                    <div class="quadrant-title">⭐ 重要不紧急 (计划执行)</div>
                    <div id="q2-tasks"></div>
                </div>
                <div class="quadrant urgent-not-important">
                    <div class="quadrant-title">⚡ 紧急不重要 (委托他人)</div>
                    <div id="q3-tasks"></div>
                </div>
                <div class="quadrant not-urgent-not-important">
                    <div class="quadrant-title">🗑️ 不重要不紧急 (删除)</div>
                    <div id="q4-tasks"></div>
                </div>
            </div>
        </div>

        <!-- 项目管理 -->
        <div id="projects" class="tab-content">
            <div class="section-title">📋 项目管理 - 多步骤任务跟踪</div>
            
            <button class="btn btn-primary" onclick="showAddProjectModal()">+ 新建项目</button>
            <div id="projectsList"></div>
        </div>

        <!-- 下一步行动 -->
        <div id="actions" class="tab-content">
            <div class="section-title">⚡ 下一步行动 - 按情境组织</div>
            
            <div class="context-section">
                <div class="context-card">
                    <div class="context-title">💻 @电脑</div>
                    <div id="context-computer"></div>
                </div>
                <div class="context-card">
                    <div class="context-title">📞 @电话</div>
                    <div id="context-phone"></div>
                </div>
                <div class="context-card">
                    <div class="context-title">🏠 @家里</div>
                    <div id="context-home"></div>
                </div>
                <div class="context-card">
                    <div class="context-title">🏢 @办公室</div>
                    <div id="context-office"></div>
                </div>
            </div>
        </div>

        <!-- 回顾系统 -->
        <div id="review" class="tab-content">
            <div class="section-title">🔄 回顾系统 - 定期检视与调整</div>
            
            <div class="review-stats">
                <div class="stat-card">
                    <div class="stat-number" id="totalTasks">0</div>
                    <div class="stat-label">总任务数</div>
                </div>
                <div class="stat-card">
                    <div class="stat-number" id="completedTasks">0</div>
                    <div class="stat-label">已完成</div>
                </div>
                <div class="stat-card">
                    <div class="stat-number" id="activeProjects">0</div>
                    <div class="stat-label">活跃项目</div>
                </div>
                <div class="stat-card">
                    <div class="stat-number" id="completionRate">0%</div>
                    <div class="stat-label">完成率</div>
                </div>
            </div>
            
            <button class="btn btn-primary" onclick="weeklyReview()">📅 每周回顾</button>
        </div>

        <div class="footer">
            <p>© 小苏趣研AI | 基于《小强升职记》GTD方法论</p>
        </div>
    </div>

    <!-- 模态框 -->
    <div id="taskModal" class="modal">
        <div class="modal-content">
            <h3>处理任务</h3>
            <div style="margin: 20px 0;">
                <label>任务内容：</label>
                <input type="text" id="taskContent" style="width: 100%; padding: 8px; margin: 5px 0;">
            </div>
            <div style="margin: 20px 0;">
                <label>分类到：</label>
                <select id="taskCategory" style="width: 100%; padding: 8px; margin: 5px 0;">
                    <option value="q1">重要且紧急</option>
                    <option value="q2">重要不紧急</option>
                    <option value="q3">紧急不重要</option>
                    <option value="q4">不重要不紧急</option>
                </select>
            </div>
            <div style="margin: 20px 0;">
                <label>情境：</label>
                <select id="taskContext" style="width: 100%; padding: 8px; margin: 5px 0;">
                    <option value="computer">@电脑</option>
                    <option value="phone">@电话</option>
                    <option value="home">@家里</option>
                    <option value="office">@办公室</option>
                </select>
            </div>
            <div style="text-align: right; margin-top: 20px;">
                <button class="btn btn-danger" onclick="closeModal()">取消</button>
                <button class="btn btn-primary" onclick="processTask()">确定</button>
            </div>
        </div>
    </div>

    
                </div>
            </div>
                    <!-- 结果显示区域 -->
                    <div class="result-display" id="result">
                        <pre id="resultContent">处理结果将在这里显示...</pre>
                    </div>
                </div>
            </div>
        </main>

        <!-- 工具页脚 -->
        <footer class="tool-footer">
            <p>由 <a href="../../index.html">AI工具集</a> 提供 | 原创工具</p>
        </footer>
    </div>

    <!-- JavaScript -->
    <script src="../../shared/js/utils.js"></script>
    <script>
        // 工具特定的JavaScript代码
        class ToolApp {
            constructor() {
                this.init();
            }

            init() {
                this.setupEventListeners();
            }

            setupEventListeners() {
                document.getElementById('processBtn').addEventListener('click', () => this.process());
                document.getElementById('clearBtn').addEventListener('click', () => this.clear());
                document.getElementById('copyBtn').addEventListener('click', () => this.copyResult());
                
                // 实时处理（可选）
                document.getElementById('input').addEventListener('input', 
                    ToolUtils.debounce(() => this.process(), 300)
                );
            }

            process() {
                const input = document.getElementById('input').value;
                const result = this.processInput(input);
                this.displayResult(result);
            }

            processInput(input) {
                
        // 数据存储
        let gtdData = {
            inbox: [],
            tasks: {
                q1: [], q2: [], q3: [], q4: []
            },
            projects: [],
            contexts: {
                computer: [], phone: [], home: [], office: []
            }
        };

        // 加载数据
        function loadData() {
            const saved = localStorage.getItem('gtdData');
            if (saved) {
                gtdData = JSON.parse(saved);
            }
            renderAll();
        }

        // 保存数据
        function saveData() {
            localStorage.setItem('gtdData', JSON.stringify(gtdData));
        }

        // 标签页切换
        function showTab(tabName) {
            document.querySelectorAll('.tab-content').forEach(tab => {
                tab.classList.remove('active');
            });
            document.querySelectorAll('.nav-tab').forEach(tab => {
                tab.classList.remove('active');
            });
            
            document.getElementById(tabName).classList.add('active');
            event.target.classList.add('active');
            
            if (tabName === 'review') {
                updateReviewStats();
            }
        }

        // 收集箱功能
        function addToInbox() {
            const input = document.getElementById('inboxInput');
            const content = input.value.trim();
            
            if (content) {
                gtdData.inbox.push({
                    id: Date.now(),
                    content: content,
                    timestamp: new Date().toLocaleString()
                });
                input.value = '';
                renderInbox();
                saveData();
            }
        }

        function handleInboxEnter(event) {
            if (event.key === 'Enter') {
                addToInbox();
            }
        }

        function renderInbox() {
            const list = document.getElementById('inboxList');
            list.innerHTML = gtdData.inbox.map(item => `
                <div class="task-item" onclick="processInboxItem(${item.id})">
                    <div style="font-weight: bold;">${item.content}</div>
                    <div style="font-size: 12px; color: #666; margin-top: 5px;">${item.timestamp}</div>
                </div>
            `).join('');
        }

        let currentProcessingItem = null;

        function processInboxItem(id) {
            currentProcessingItem = gtdData.inbox.find(item => item.id === id);
            document.getElementById('taskContent').value = currentProcessingItem.content;
            document.getElementById('taskModal').style.display = 'block';
        }

        function processTask() {
            if (!currentProcessingItem) return;
            
            const category = document.getElementById('taskCategory').value;
            const context = document.getElementById('taskContext').value;
            const content = document.getElementById('taskContent').value;
            
            const task = {
                id: Date.now(),
                content: content,
                completed: false,
                context: context,
                timestamp: new Date().toLocaleString()
            };
            
            gtdData.tasks[category].push(task);
            gtdData.contexts[context].push(task);
            
            // 从收集箱移除
            gtdData.inbox = gtdData.inbox.filter(item => item.id !== currentProcessingItem.id);
            
            closeModal();
            renderAll();
            saveData();
        }

        function closeModal() {
            document.getElementById('taskModal').style.display = 'none';
            currentProcessingItem = null;
        }

        // 渲染四象限
        function renderMatrix() {
            ['q1', 'q2', 'q3', 'q4'].forEach(quadrant => {
                const container = document.getElementById(`${quadrant}-tasks`);
                container.innerHTML = gtdData.tasks[quadrant].map(task => `
                    <div class="task-item ${task.completed ? 'completed' : ''}" onclick="toggleTask('${quadrant}', ${task.id})">
                        <div style="display: flex; align-items: center; gap: 10px;">
                            <input type="checkbox" ${task.completed ? 'checked' : ''} onclick="event.stopPropagation()">
                            <span style="${task.completed ? 'text-decoration: line-through; opacity: 0.6;' : ''}">${task.content}</span>
                        </div>
                        <div style="font-size: 12px; color: #666; margin-top: 5px;">${task.timestamp}</div>
                    </div>
                `).join('');
            });
        }

        // 渲染情境
        function renderContexts() {
            Object.keys(gtdData.contexts).forEach(context => {
                const container = document.getElementById(`context-${context}`);
                container.innerHTML = gtdData.contexts[context].map(task => `
                    <div class="task-item ${task.completed ? 'completed' : ''}" onclick="toggleTaskInContext('${context}', ${task.id})">
                        <div style="display: flex; align-items: center; gap: 10px;">
                            <input type="checkbox" ${task.completed ? 'checked' : ''} onclick="event.stopPropagation()">
                            <span style="${task.completed ? 'text-decoration: line-through; opacity: 0.6;' : ''}">${task.content}</span>
                        </div>
                    </div>
                `).join('');
            });
        }

        function toggleTask(quadrant, taskId) {
            const task = gtdData.tasks[quadrant].find(t => t.id === taskId);
            if (task) {
                task.completed = !task.completed;
                // 同步更新情境中的任务
                const contextTask = gtdData.contexts[task.context].find(t => t.id === taskId);
                if (contextTask) {
                    contextTask.completed = task.completed;
                }
                renderAll();
                saveData();
            }
        }

        function toggleTaskInContext(context, taskId) {
            const task = gtdData.contexts[context].find(t => t.id === taskId);
            if (task) {
                task.completed = !task.completed;
                // 同步更新四象限中的任务
                Object.keys(gtdData.tasks).forEach(quadrant => {
                    const quadrantTask = gtdData.tasks[quadrant].find(t => t.id === taskId);
                    if (quadrantTask) {
                        quadrantTask.completed = task.completed;
                    }
                });
                renderAll();
                saveData();
            }
        }

        // 更新回顾统计
        function updateReviewStats() {
            let totalTasks = 0;
            let completedTasks = 0;
            
            Object.values(gtdData.tasks).forEach(quadrant => {
                totalTasks += quadrant.length;
                completedTasks += quadrant.filter(task => task.completed).length;
            });
            
            const completionRate = totalTasks > 0 ? Math.round((completedTasks / totalTasks) * 100) : 0;
            
            document.getElementById('totalTasks').textContent = totalTasks;
            document.getElementById('completedTasks').textContent = completedTasks;
            document.getElementById('activeProjects').textContent = gtdData.projects.length;
            document.getElementById('completionRate').textContent = completionRate + '%';
        }

        function weeklyReview() {
            alert('每周回顾提醒：\n\n1. 检查收集箱是否清空\n2. 回顾项目进展\n3. 更新下一步行动\n4. 调整优先级\n5. 清理已完成任务');
        }

        // 渲染所有内容
        function renderAll() {
            renderInbox();
            renderMatrix();
            renderContexts();
        }

        // 初始化
        document.addEventListener('DOMContentLoaded', function() {
            loadData();
            
            // 设置定时提醒
            setInterval(() => {
                if (gtdData.inbox.length > 10) {
                    console.log('收集箱提醒：建议及时处理收集箱中的内容');
                }
            }, 300000); // 5分钟检查一次
        });
    
                return input;
            }

            displayResult(result) {
                document.getElementById('resultContent').textContent = result;
            }

            clear() {
                document.getElementById('input').value = '';
                document.getElementById('resultContent').textContent = '处理结果将在这里显示...';
            }

            copyResult() {
                const result = document.getElementById('resultContent').textContent;
                if (result && result !== '处理结果将在这里显示...') {
                    ToolUtils.copyToClipboard(result);
                } else {
                    ToolUtils.showToast('没有可复制的内容', 'warning');
                }
            }
        }

        // 初始化应用
        document.addEventListener('DOMContentLoaded', () => {
            new ToolApp();
        });
    </script>
</body>
</html>
